# MgO - 氧化镁

---

MgO，氧化镁，仅仅只是一个ssh登录的辅助工具。

## 背景
随着旅游业务的扩张，旅游rd小伙伴们的服务器也越来越多，小伙伴们在登录应用所在服务器所消耗的精力也越来越多。本工具旨在提高登录应用所在服务器的效率，处理问题更快捷。

## 效率提高
假设relay密码的长度为10，动态密码为6，所以登录relay跳板机，需要输入密码共敲16次键盘。
用氧化镁，可以为小伙伴们最多减少64次键盘敲击以及思考所登录服务器的hostname的时间（以张迎兵登录hotel-meilv-rhone-miniflow01为例），最少减少33次键盘敲击以及思考所登录服务器的hostname的时间（以葛伟登录db24为例）。

## 演示
### 没有氧化镁的时候，我们这么登录服务器
![没有氧化镁](http://ww1.sinaimg.cn/large/625dbb25gw1evjx0pcyhng20g50a20u0.gif)
### 有了氧化镁，我们这么登录服务器
![氧化镁](http://ww1.sinaimg.cn/large/625dbb25gw1evjx0ojh2fg20g50a2n2i.gif)

## 功能特点
1. 安装方便  
2. 登录服务器无需再经过繁杂的输入过程  
3. 方便的配置功能让你随意快速登录服务器  
4. 每天只需要输入一次密码让你忘却糟心的登录过程  

## 安装
1. clone本项目到本地，执行install.sh安装。  
2. 输入relay/mis账号。注意不要带邮箱后缀。  
3. 输入mis账号密码，用于访问ops接口同步部署服务器列表。  
4. 输入你所需要登录的服务器上的应用名，如：meilv-online，多个应用名以英文逗号分隔。  
5. 打开新的终端，输入mgo。  

## 使用说明
### 1. 直接命令
输入mgo命令之后，会出现登录服务器列表，此列表由用户自主维护到mgo安装目录中的dest.config文件中。格式: `hostname[ip]`(ip可省略)  
看到服务器列表之后，选择输入对应服务器的数字，即可登录。  
### 2. 定制项目服务器列表，参数 -r
考虑到每个人涉及的项目过多，导致服务器列表过长的问题，增加了多服务器配置文件功能。配置你想要一个或多个服务器在一个名`name.config`的文件中，输入`mgo -r name`命令可显示改配置文件内的服务器列表。
### 3. 直达服务器，参数 -d 
为了加快登录服务器速度，增加直达服务器参数-d。输入`mgo -d n`(n为数字)，会直达dest.config中第n个服务器，无需查看服务器列表过程。
### 4. 追加服务器列表 add.sh
当有新的应用服务增加，可用过执行`sh add.sh`，通过脚本程序的提示，自动增加指定应用下的所有服务器。
### 5. 更新服务器列表 update.sh
当应用服务增加服务器时，无需手动添加服务器host至dest.config文件中。只需执行`sh update.sh`,通过脚本提示，自动增加服务器至dest.config。
# Mgo
